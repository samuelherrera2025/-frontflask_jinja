{% extends "base.html" %}
{% block contenido %}
<h1>Gestión de Clientes</h1>

<form method="post" action="{{ url_for('rutas_clientes.crear_cliente') if modo == 'crear' else url_for('rutas_clientes.actualizar_cliente') }}">
    <input type="hidden" name="id" value="{{ cliente.id if cliente else '' }}">
    <input type="number" step="0.01" name="credito" placeholder="Crédito" value="{{ cliente.credito if cliente else '' }}" required>
    <input type="text" name="fkcodpersona" placeholder="Código persona" value="{{ cliente.fkcodpersona if cliente else '' }}" required>
    <input type="text" name="fkcodempresa" placeholder="Código empresa" value="{{ cliente.fkcodempresa if cliente else '' }}">
    <button type="submit">{{ "Crear" if modo == "crear" else "Actualizar" }}</button>
</form>

<form method="post" action="{{ url_for('rutas_clientes.buscar_cliente') }}">
    <input type="text" name="codigo_buscar" placeholder="Buscar por id">
    <button type="submit">Buscar</button>
</form>

{% if mensaje %}<p style="color:red;">{{ mensaje }}</p>{% endif %}

<table border="1" cellpadding="5" cellspacing="0" style="margin:20px auto;">
<thead>
<tr><th>ID</th><th>Crédito</th><th>fkcodpersona</th><th>fkcodempresa</th><th>Acciones</th></tr>
</thead>
<tbody>
{% for c in clientes %}
<tr>
  <td>{{ c.id }}</td>
  <td>{{ c.credito }}</td>
  <td>{{ c.fkcodpersona }}</td>
  <td>{{ c.fkcodempresa }}</td>
  <td>
    <form method="post" action="{{ url_for('rutas_clientes.eliminar_cliente', id_cliente=c.id) }}">
      <button type="submit">Eliminar</button>
    </form>
  </td>
</tr>
{% endfor %}
</tbody>
</table>
{% endblock %}
