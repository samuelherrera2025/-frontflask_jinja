{% extends "base.html" %}
{% block contenido %}
<h1>Gestión de Personas</h1>

<form method="post" action="{{ url_for('rutas_personas.crear_persona') if modo == 'crear' else url_for('rutas_personas.actualizar_persona') }}">
    <input type="text" name="codigo" placeholder="Código" value="{{ persona.codigo if persona else '' }}" required>
    <input type="text" name="nombre" placeholder="Nombre" value="{{ persona.nombre if persona else '' }}" required>
    <input type="email" name="email" placeholder="Email" value="{{ persona.email if persona else '' }}" required>
    <input type="text" name="telefono" placeholder="Teléfono" value="{{ persona.telefono if persona else '' }}" required>
    <button type="submit">{{ "Crear" if modo == "crear" else "Actualizar" }}</button>
</form>

<form method="post" action="{{ url_for('rutas_personas.buscar_persona') }}">
    <input type="text" name="codigo_buscar" placeholder="Buscar por código">
    <button type="submit">Buscar</button>
</form>

{% if mensaje %}<p style="color:red;">{{ mensaje }}</p>{% endif %}

<table border="1" cellpadding="5" cellspacing="0" style="margin:20px auto;">
<thead>
<tr><th>Código</th><th>Nombre</th><th>Email</th><th>Teléfono</th><th>Acciones</th></tr>
</thead>
<tbody>
{% for p in personas %}
<tr>
  <td>{{ p.codigo }}</td>
  <td>{{ p.nombre }}</td>
  <td>{{ p.email }}</td>
  <td>{{ p.telefono }}</td>
  <td>
    <form method="post" action="{{ url_for('rutas_personas.eliminar_persona', codigo=p.codigo) }}">
      <button type="submit">Eliminar</button>
    </form>
  </td>
</tr>
{% endfor %}
</tbody>
</table>
{% endblock %}
